<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.myedumyselect.personal.dao.PersonalLoginDao">

	<resultMap type="personalLogin" id="personalLoginMap">
    <id column="personal_id" property="personalId" />
    <result column="member_type_id" property="memberTypeId" />
    <result column="personal_name" property="personalName" />
    <result column="personal_email" property="personalEmail" />
    <result column="personal_passwd" property="personalPasswd" />
    <result column="personal_birth" property="personalBirth"/>
    <result column="personal_address" property="personalAddress"/>
    <result column="personal_phone" property="personalPhone"/>
    <result column="personal_join_date" property="personalJoinDate"/>
    <result column="personal_login_fail_count" property="personalLoginFailCount"/>
    <result column="personal_account_banned_date" property="personalAccountBannedDate"/>
    <result column="personal_passwd_change_date" property="personalPasswdChangeDate"/>
</resultMap>


<!-- 로그인 select -->
	<select id="loginProcess" parameterType="personalLogin"
		resultMap="personalLoginMap">
		
		SELECT DISTINCT personal_id, personal_name, personal_email, personal_birth, personal_address, personal_phone
		FROM tb_personal
		WHERE personal_id = #{personalId} AND personal_passwd = #{personalPasswd}
	</select>

<!-- 회원가입 insert -->
<insert id="personalInsert" parameterType="personalLogin">
    INSERT INTO tb_personal (personal_id, personal_name, personal_passwd, personal_email, personal_birth, personal_address, personal_phone)
    VALUES (#{personalId}, #{personalName}, #{personalPasswd}, #{personalEmail}, #{personalBirth, jdbcType=VARCHAR}, #{personalAddress}, #{personalPhone})
</insert>

</mapper>
